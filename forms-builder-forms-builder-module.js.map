{"version":3,"sources":["./src/app/forms-builder/components/form-info/form-info.component.html","./src/app/forms-builder/components/form-preview/form-preview.component.html","./src/app/forms-builder/components/forms-builder-layout/forms-builder-layout.component.html","./src/app/forms-builder/components/forms-builder/forms-builder.component.html","./src/app/forms-builder/components/import-layout/import-layout.component.html","./src/app/forms-builder/components/saved-forms/saved-forms.component.html","./src/app/forms-builder/components/form-info/form-info.component.scss","./src/app/forms-builder/components/form-info/form-info.component.ts","./src/app/forms-builder/components/form-preview/form-preview.component.scss","./src/app/forms-builder/components/form-preview/form-preview.component.ts","./src/app/forms-builder/components/forms-builder-layout/forms-builder-layout.component.ts","./src/app/forms-builder/components/forms-builder/forms-builder.component.scss","./src/app/forms-builder/components/forms-builder/forms-builder.component.ts","./src/app/forms-builder/components/import-layout/import-layout.component.scss","./src/app/forms-builder/components/import-layout/import-layout.component.ts","./src/app/forms-builder/components/saved-forms/saved-forms.component.scss","./src/app/forms-builder/components/saved-forms/saved-forms.component.ts","./src/app/forms-builder/constants.ts","./src/app/forms-builder/forms-builder-routing.module.ts","./src/app/forms-builder/forms-builder.module.ts","./src/app/forms-builder/forms-interpreter.ts","./src/app/forms-builder/guards/auth.guard.ts","./src/app/forms-builder/guards/index.ts","./src/app/forms-builder/guards/preview.guard.ts","./src/app/forms-builder/services/data.service.ts"],"names":[],"mappings":"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","file":"forms-builder-forms-builder-module.js","sourcesContent":["module.exports = \"<div class=\\\"modal-header\\\">\\n    <h4 class=\\\"modal-title pull-left\\\">{{config.title || config.formName}} configuration</h4>\\n    <button type=\\\"button\\\" class=\\\"close pull-right\\\" aria-label=\\\"Close\\\" (click)=\\\"modalRef.hide()\\\">\\n      <span aria-hidden=\\\"true\\\">&times;</span>\\n    </button>\\n  </div>\\n  <div class=\\\"modal-body px-4 d-flex flex-column\\\">\\n    <div class=\\\"position-relative h-100\\\">\\n      <form #formInfoForm=\\\"ngForm\\\">\\n        <div class=\\\"form-group row mx-0 mb-2 flex-nowrap\\\">\\n          <label for=\\\"form-title\\\" class=\\\"col-form-label px-0\\\">Form title</label>\\n          <div class=\\\"flex-fill ml-2\\\">\\n            <input type=\\\"text\\\" class=\\\"form-control\\\" [(ngModel)]=\\\"formInfo.title\\\" placeholder=\\\"Enter form-title title\\\"\\n              name=\\\"title\\\" #title=\\\"ngModel\\\" required id=\\\"form-title\\\">\\n            <div *ngIf=\\\"title.invalid && (title.dirty || title.touched)\\\" class=\\\"alert alert-danger py-1 px-2 m-0\\\">\\n              <div *ngIf=\\\"title.errors.required\\\">Form title is required.</div>\\n            </div>\\n          </div>\\n        </div>\\n        <div class=\\\"form-group row mx-0 mb-2 flex-nowrap\\\">\\n          <label for=\\\"form-name\\\" class=\\\"col-form-label px-0\\\">Form name</label>\\n          <div class=\\\"flex-fill ml-2\\\">\\n            <input type=\\\"text\\\" class=\\\"form-control\\\" [(ngModel)]=\\\"formInfo.formName\\\" placeholder=\\\"Enter form name\\\"\\n              name=\\\"name\\\" #formName=\\\"ngModel\\\" required id=\\\"form-name\\\">\\n            <div *ngIf=\\\"formName.invalid && (formName.dirty || formName.touched)\\\"\\n              class=\\\"alert alert-danger py-1 px-2 m-0\\\">\\n              <div *ngIf=\\\"formName.errors.required\\\">From name is required.</div>\\n            </div>\\n          </div>\\n        </div>\\n        <div class=\\\"form-group row mx-0 mb-2 flex-nowrap\\\">\\n            <label for=\\\"form-folder\\\" class=\\\"col-form-label px-0\\\">Form folder</label>\\n            <div class=\\\"flex-fill ml-2\\\">\\n              <input type=\\\"text\\\" class=\\\"form-control\\\" [(ngModel)]=\\\"formInfo.folder\\\" placeholder=\\\"Enter form folder\\\"\\n                name=\\\"folder\\\" #formFolder=\\\"ngModel\\\" required id=\\\"form-folder\\\">\\n              <div *ngIf=\\\"formFolder.invalid && (formFolder.dirty || formFolder.touched)\\\"\\n                class=\\\"alert alert-danger py-1 px-2 m-0\\\">\\n                <div *ngIf=\\\"formFolder.errors.required\\\">From folder is required.</div>\\n              </div>\\n            </div>\\n          </div>\\n        <div class=\\\"form-group row mx-0 mb-2 flex-nowrap\\\">\\n          <label for=\\\"form-description\\\" class=\\\"col-form-label px-0\\\">Description</label>\\n          <div class=\\\"flex-fill ml-2\\\">\\n            <textarea class=\\\"form-control\\\" rows=\\\"5\\\" [(ngModel)]=\\\"formInfo.description\\\"\\n              placeholder=\\\"Enter form description\\\" id=\\\"form-description\\\" name=\\\"description\\\"></textarea>\\n          </div>\\n        </div>\\n        <div class=\\\"form-group row mx-0 mb-1 flex-nowrap\\\">\\n          <label for=\\\"form-is-public\\\" class=\\\"col-form-label px-0\\\">Is Public</label>\\n          <div class=\\\"flex-fill ml-2\\\">\\n            <input class=\\\"mt-0 h-100\\\" type=\\\"checkbox\\\" name=\\\"is-public\\\" id=\\\"form-is-public\\\"\\n            [(ngModel)]=\\\"formInfo.isPublic\\\">\\n          </div>\\n        </div>\\n        <h4 class=\\\"mt-3\\\">_var_import_overrides</h4>\\n        <div class=\\\"form-group row mx-0 mb-2 flex-nowrap var-import\\\">\\n          <label for=\\\"form-object-owner\\\" class=\\\"col-form-label px-0\\\">ownerName</label>\\n          <div class=\\\"flex-fill ml-2\\\">\\n            <input type=\\\"text\\\" class=\\\"form-control\\\" [(ngModel)]=\\\"formInfo.workflowsMap._var_import_overrides.ownerName\\\" placeholder=\\\"Enter objectOwner\\\"\\n              name=\\\"object-owner\\\" #ownerName=\\\"ngModel\\\" required id=\\\"form-object-owner\\\">\\n            <div *ngIf=\\\"ownerName.invalid && (ownerName.dirty || ownerName.touched)\\\"\\n              class=\\\"alert alert-danger py-1 px-2 m-0\\\">\\n              <div *ngIf=\\\"ownerName.errors.required\\\">ownerName is required.</div>\\n            </div>\\n          </div>\\n        </div>\\n        <div class=\\\"form-group row mx-0 mb-2 flex-nowrap var-import\\\">\\n          <label for=\\\"form-object-name\\\" class=\\\"col-form-label px-0\\\">tableName</label>\\n          <div class=\\\"flex-fill ml-2\\\">\\n            <input type=\\\"text\\\" class=\\\"form-control\\\" [(ngModel)]=\\\"formInfo.workflowsMap._var_import_overrides.tableName\\\" placeholder=\\\"Enter tableName\\\"\\n              name=\\\"object-name\\\" #tableName=\\\"ngModel\\\" required id=\\\"form-object-name\\\">\\n            <div *ngIf=\\\"tableName.invalid && (tableName.dirty || tableName.touched)\\\"\\n              class=\\\"alert alert-danger py-1 px-2 m-0\\\">\\n              <div *ngIf=\\\"tableName.errors.required\\\">tableName is required.</div>\\n            </div>\\n          </div>\\n        </div>\\n        <div class=\\\"form-group row mx-0 mb-2 flex-nowrap var-import\\\">\\n          <label for=\\\"form-base-api-url\\\" class=\\\"col-form-label px-0\\\">base_api_url</label>\\n          <div class=\\\"flex-fill ml-2\\\">\\n            <input type=\\\"text\\\" class=\\\"form-control\\\" [(ngModel)]=\\\"formInfo.workflowsMap._var_import_overrides.base_api_url\\\" placeholder=\\\"Enter base_api_url\\\"\\n              name=\\\"base_api_url\\\" #baseUrl=\\\"ngModel\\\" required id=\\\"form-base-api-url\\\">\\n            <div *ngIf=\\\"baseUrl.invalid && (baseUrl.dirty || baseUrl.touched)\\\" class=\\\"alert alert-danger py-1 px-2 m-0\\\">\\n              <div *ngIf=\\\"baseUrl.errors.required\\\">base_api_url is required.</div>\\n            </div>\\n          </div>\\n        </div>\\n        <div class=\\\"form-group row mx-0 mb-1 flex-nowrap var-import\\\">\\n          <label for=\\\"form-public-code\\\" class=\\\"col-form-label px-0\\\">userPublicAccessCode</label>\\n          <div class=\\\"flex-fill ml-2\\\">\\n            <input type=\\\"text\\\" class=\\\"form-control\\\" [(ngModel)]=\\\"formInfo.workflowsMap._var_import_overrides.userPublicAccessCode\\\"\\n              placeholder=\\\"Enter userPublicAccessCode\\\" name=\\\"public-code\\\" #userPublicAccessCode=\\\"ngModel\\\" required\\n              id=\\\"form-public-code\\\">\\n            <div *ngIf=\\\"userPublicAccessCode.invalid && (userPublicAccessCode.dirty || userPublicAccessCode.touched)\\\"\\n              class=\\\"alert alert-danger py-1 px-2 m-0\\\">\\n              <div *ngIf=\\\"userPublicAccessCode.errors.required\\\">userPublicAccessCode is required.</div>\\n            </div>\\n          </div>\\n        </div>\\n      </form>\\n    </div>\\n  </div>\\n  <div class=\\\"modal-footer flex-column\\\">\\n    <div class=\\\"row w-100 mx-0 px-0\\\">\\n      <button type=\\\"button\\\" (click)=\\\"saveForm()\\\" [disabled]=\\\"!formInfoForm.valid\\\"\\n        class=\\\"btn btn-primary ml-auto mr-2\\\">Save</button>\\n      <button type=\\\"button\\\" class=\\\"btn btn-light\\\" (click)=\\\"modalRef.hide()\\\">Cancel</button>\\n    </div>\\n  </div>\\n\"","module.exports = \"<ngx-dynamic-component *ngIf=\\\"formInfo && formInfo.uiModel\\\" class=\\\"w-100 h-100\\\" [uiModel]=\\\"formInfo.uiModel\\\"\\n      [dataModel]=\\\"{}\\\" [interpreter]=\\\"interpreter\\\" [scripts]=\\\"scripts\\\"></ngx-dynamic-component>\\n<div class=\\\"d-flex justify-content-center position-absolute align-items-center w-100 h-100 spinner bg-white\\\"\\n  *ngIf=\\\"loading$ | async\\\">\\n  <div class=\\\"spinner-border\\\" role=\\\"status\\\">\\n    <span class=\\\"sr-only\\\">Loading...</span>\\n  </div>\\n</div>\\n<div *ngIf=\\\"hasForm === false\\\" class=\\\"d-flex h-100 w-100 justify-content-center align-items-center\\\">\\n  <h4 class=\\\"text-center\\\">Form <i class=\\\"lead\\\">{{formParams}}</i> not found</h4>\\n</div>\\n\"","module.exports = \"<app-layout [config]=\\\"layoutConfig\\\">\\n  <h2 title class=\\\"mb-0 ml-0 top-sub-header w-md-down-50\\\">WORKSHEET <span>SYSTEMS</span> - Forms Builder</h2>\\n  <div header class=\\\"ml-auto d-flex\\\"></div>\\n  <app-saved-forms sidebar class=\\\"h-100 w-100 py-2\\\"></app-saved-forms>\\n  <app-forms-builder content></app-forms-builder>\\n</app-layout>\\n\"","module.exports = \"<div class=\\\"card overflow-hidden mb-0 w-100 h-100\\\">\\n  <div class=\\\"card-header p-2 d-flex align-items-center\\\">\\n    <h5 class=\\\"mb-0 ml-2\\\">{{formInfo.title}}</h5>\\n    <div class=\\\"ml-auto\\\">\\n      <button type=\\\"button\\\" class=\\\"btn btn-primary mr-2\\\" (click)=\\\"openConfig()\\\"><i\\n          class=\\\"fa fa-save\\\"></i>&nbsp;Save</button>\\n      <button type=\\\"button\\\" class=\\\"btn btn-secondary\\\" [disabled]=\\\"isPreviewDisabled\\\"\\n        (click)=\\\"toggleMode()\\\">{{modeTitle}}</button>\\n      <span dropdown class=\\\"position-relative px-2\\\" placement=\\\"bottom left\\\" container=\\\"body\\\">\\n        <button dropdownToggle type=\\\"button\\\" class=\\\"btn\\\">\\n          <i class=\\\"fa fa-ellipsis-v\\\"></i>\\n        </button>\\n        <ul *dropdownMenu class=\\\"dropdown-menu left-bottom-menu\\\" role=\\\"menu\\\">\\n          <li role=\\\"menuitem\\\">\\n            <a class=\\\"dropdown-item cursor-pointer\\\" (click)=\\\"onNewForm()\\\">New Form</a>\\n          </li>\\n          <li role=\\\"menuitem\\\">\\n            <a class=\\\"dropdown-item cursor-pointer\\\" (click)=\\\"onFileExport()\\\">Export to File</a>\\n          </li>\\n          <li role=\\\"menuitem\\\">\\n            <a class=\\\"dropdown-item cursor-pointer\\\" (click)=\\\"onFileImport()\\\">Import from File</a>\\n          </li>\\n          <li role=\\\"menuitem\\\" *ngIf=\\\"isFormSelected\\\">\\n            <a class=\\\"dropdown-item cursor-pointer\\\" (click)=\\\"onDeleteForm()\\\">Delete form</a>\\n          </li>\\n        </ul>\\n      </span>\\n    </div>\\n  </div>\\n  <div class=\\\"card-body p-2 flex-fill overflow-auto\\\">\\n    <ngx-dynamic-component *ngIf=\\\"!designerMode && formInfo.uiModel\\\" class=\\\"w-100 h-100 d-block\\\" [uiModel]=\\\"formInfo.uiModel\\\"\\n      [dataModel]=\\\"{}\\\" [interpreter]=\\\"interpreter\\\" [scripts]=\\\"scripts\\\"></ngx-dynamic-component>\\n    <ngx-designer-component *ngIf=\\\"designerMode\\\" [interpreter]=\\\"interpreter\\\" [scripts]=\\\"scripts\\\" class=\\\"d-flex flex-fill h-100\\\"\\n      (scriptUpdate)=\\\"onScriptUpdate($event)\\\" (uiModelUpdated)=\\\"onUIModelUpdate($event)\\\" [uiModel]=\\\"formInfo.uiModel\\\">\\n    </ngx-designer-component>\\n  </div>\\n</div>\\n\\n<div class=\\\"d-flex justify-content-center position-absolute align-items-center w-100 h-100 spinner bg-white\\\"\\n  *ngIf=\\\"loading$ | async\\\">\\n  <div class=\\\"spinner-border\\\" role=\\\"status\\\">\\n    <span class=\\\"sr-only\\\">Loading...</span>\\n  </div>\\n</div>\\n\"","module.exports = \"\\n\"","module.exports = \"<alert type=\\\"danger\\\" *ngIf=\\\"error\\\">\\n  <strong>Error:</strong> {{error}}\\n</alert>\\n<alert type=\\\"info\\\" *ngIf=\\\"!isAuthenticated\\\">\\n  Please <a class=\\\"link cursor-pointer\\\" (click)=\\\"loginService.openDialog()\\\">Login</a> to be able to save & load forms.\\n</alert>\\n<app-list-view [comparator]=\\\"dataService.areFormsEqual\\\" *ngIf=\\\"isAuthenticated && !error;\\\" #listView class=\\\"d-flex h-100 overflow-auto\\\" [list]=\\\"forms\\\"\\n  group=\\\"folder\\\" orderBy=\\\"id\\\" (select)=\\\"onSelect($event)\\\">\\n  <ng-template let-item>\\n    <div class=\\\"m-1 pl-3\\\" title=\\\"{{item.description}}\\\">\\n      {{item.title || item.formName}}\\n    </div>\\n  </ng-template>\\n</app-list-view>\\n\"","module.exports = \".form-group > label {\\n  -webkit-box-flex: 0;\\n          flex: 0 0 100px;\\n}\\n\\n.form-group > label {\\n  -webkit-box-flex: 0;\\n          flex: 0 0 150px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3ZrdWt1cmJhL0RldmVsb3BtZW50L1Byb2plY3RzL3Vwd29yay93b3Jrc2hlZXRzMi1hcHAvc3JjL2FwcC9mb3Jtcy1idWlsZGVyL2NvbXBvbmVudHMvZm9ybS1pbmZvL2Zvcm0taW5mby5jb21wb25lbnQuc2NzcyIsInNyYy9hcHAvZm9ybXMtYnVpbGRlci9jb21wb25lbnRzL2Zvcm0taW5mby9mb3JtLWluZm8uY29tcG9uZW50LnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxtQkFBQTtVQUFBLGVBQUE7QUNDRjs7QURFQTtFQUNFLG1CQUFBO1VBQUEsZUFBQTtBQ0NGIiwiZmlsZSI6InNyYy9hcHAvZm9ybXMtYnVpbGRlci9jb21wb25lbnRzL2Zvcm0taW5mby9mb3JtLWluZm8uY29tcG9uZW50LnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIuZm9ybS1ncm91cCA+IGxhYmVsIHtcbiAgZmxleDogMCAwIDEwMHB4O1xufVxuXG4uZm9ybS1ncm91cCA+IGxhYmVsIHtcbiAgZmxleDogMCAwIDE1MHB4O1xufVxuIiwiLmZvcm0tZ3JvdXAgPiBsYWJlbCB7XG4gIGZsZXg6IDAgMCAxMDBweDtcbn1cblxuLmZvcm0tZ3JvdXAgPiBsYWJlbCB7XG4gIGZsZXg6IDAgMCAxNTBweDtcbn0iXX0= */\"","import { Component, OnInit, EventEmitter, Input, Output } from '@angular/core';\nimport { ModalDirective } from 'ngx-bootstrap';\n\nimport { FormShortInfo, FormInfo } from '../../models';\nimport { deepClone } from 'src/app/shared';\n\n@Component({\n  selector: 'app-form-info',\n  templateUrl: './form-info.component.html',\n  styleUrls: ['./form-info.component.scss']\n})\nexport class FormInfoComponent implements OnInit {\n\n  @Input() config: FormInfo;\n  @Input() modalRef: ModalDirective;\n  @Output() save = new EventEmitter<FormShortInfo>();\n\n  formInfo: FormInfo;\n\n  ngOnInit() {\n    this.formInfo = deepClone(this.config);\n  }\n\n  saveForm() {\n    this.save.emit(this.formInfo);\n  }\n}\n","module.exports = \":host ::ng-deep > ngx-dynamic-component {\\n  display: block;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3ZrdWt1cmJhL0RldmVsb3BtZW50L1Byb2plY3RzL3Vwd29yay93b3Jrc2hlZXRzMi1hcHAvc3JjL2FwcC9mb3Jtcy1idWlsZGVyL2NvbXBvbmVudHMvZm9ybS1wcmV2aWV3L2Zvcm0tcHJldmlldy5jb21wb25lbnQuc2NzcyIsInNyYy9hcHAvZm9ybXMtYnVpbGRlci9jb21wb25lbnRzL2Zvcm0tcHJldmlldy9mb3JtLXByZXZpZXcuY29tcG9uZW50LnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxjQUFBO0FDQ0YiLCJmaWxlIjoic3JjL2FwcC9mb3Jtcy1idWlsZGVyL2NvbXBvbmVudHMvZm9ybS1wcmV2aWV3L2Zvcm0tcHJldmlldy5jb21wb25lbnQuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIjpob3N0IDo6bmctZGVlcCA+IG5neC1keW5hbWljLWNvbXBvbmVudCB7XG4gIGRpc3BsYXk6IGJsb2NrO1xufVxuIiwiOmhvc3QgOjpuZy1kZWVwID4gbmd4LWR5bmFtaWMtY29tcG9uZW50IHtcbiAgZGlzcGxheTogYmxvY2s7XG59Il19 */\"","import { Component, OnInit } from '@angular/core';\nimport { ActivatedRoute } from '@angular/router';\nimport { switchMap, tap } from 'rxjs/operators';\nimport { Observable } from 'rxjs';\nimport { DataService } from '../../services/data.service';\nimport { FormOwner, FormInfo } from '../../models';\nimport { Interpreter } from 'src/app/shared/interpreter/interpreter';\nimport { getInterpreter } from 'src/app/shared/interpreter';\n\n@Component({\n  selector: 'app-form-preview',\n  templateUrl: './form-preview.component.html',\n  styleUrls: ['./form-preview.component.scss']\n})\nexport class FormPreviewComponent implements OnInit {\n\n  formInfo: FormInfo;\n  loading$: Observable<boolean>;\n  hasForm: boolean;\n  formOwner: FormOwner;\n  interpreter: Interpreter;\n  scripts: string;\n\n  constructor(private dataService: DataService, private route: ActivatedRoute) { }\n\n  ngOnInit() {\n    this.interpreter = getInterpreter();\n    this.loading$ = this.dataService.isLoading$;\n    this.route.params.pipe(\n      tap(params => this.formOwner = params),\n      switchMap(params => this.dataService.getForm(params)))\n      .subscribe(form => {\n        this.hasForm = Boolean(form);\n        if (this.hasForm) {\n          this.scripts = form.scripts;\n          this.formInfo = form;\n        } else {\n          this.formInfo = null;\n        }\n    });\n  }\n\n  get formParams() {\n    if (this.formOwner) {\n      return `${this.formOwner.ownerName}/${this.formOwner.formName}`;\n    }\n    return '';\n  }\n}\n","import { Component, OnInit, OnDestroy } from '@angular/core';\nimport { NavigationEnd, Router, ActivatedRoute } from '@angular/router';\nimport { Title } from '@angular/platform-browser';\nimport { Subject } from 'rxjs';\nimport { takeUntil, filter } from 'rxjs/operators';\nimport { LayoutConfig } from 'src/app/shared/models';\nimport { FormOwner } from '../../models';\nimport { DataService } from '../../services/data.service';\nimport { FORM_BUILDER_PATH } from '../../constants';\n\n@Component({\n  selector: 'app-forms-builder-layout',\n  templateUrl: './forms-builder-layout.component.html',\n  styles: []\n})\nexport class FormsBuilderLayoutComponent implements OnInit, OnDestroy {\n\n  layoutConfig: LayoutConfig = {\n    icon: 'assets/img/je-logo-64x64.png',\n    smIcon: 'assets/img/je-logo-36x36.png',\n    appName: 'forms-builder',\n    collapsed: true\n  };\n\n  private destroy = new Subject<any>();\n\n  constructor(private router: Router, private titleService: Title, private dataService: DataService) { }\n\n  ngOnInit() {\n    this.titleService.setTitle('Worksheets Forms builder');\n    this.handleRouterState(this.router.routerState.root.firstChild);\n    this.router.events.pipe(takeUntil(this.destroy), filter(event => event instanceof NavigationEnd)).subscribe((route) => {\n      if (!this.router.routerState.snapshot.url.startsWith(FORM_BUILDER_PATH)) {\n        return;\n      }\n      this.handleRouterState(this.router.routerState.root.firstChild);\n    });\n  }\n\n  private handleRouterState(route: ActivatedRoute) {\n    let params: FormOwner;\n    while (route) {\n      params = route.snapshot.params as FormOwner;\n      route = route.firstChild;\n    }\n    this.dataService.selectForm(params);\n  }\n\n  ngOnDestroy() {\n    this.destroy.next();\n    this.destroy.complete();\n  }\n\n}\n","module.exports = \"ngx-dynamic-component,\\nngx-designer-component ::ng-deep ngx-dynamic-component,\\nngx-designer-component ::ng-deep #empty-container {\\n  background: white;\\n}\\n\\n.toolbar.btn-group > * {\\n  -webkit-box-flex: initial;\\n          flex: initial;\\n}\\n\\n:host {\\n  display: -webkit-box;\\n  display: flex;\\n  -webkit-box-orient: vertical;\\n  -webkit-box-direction: normal;\\n          flex-direction: column;\\n  height: 100%;\\n}\\n\\n.spinner {\\n  z-index: 11;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3ZrdWt1cmJhL0RldmVsb3BtZW50L1Byb2plY3RzL3Vwd29yay93b3Jrc2hlZXRzMi1hcHAvc3JjL2FwcC9mb3Jtcy1idWlsZGVyL2NvbXBvbmVudHMvZm9ybXMtYnVpbGRlci9mb3Jtcy1idWlsZGVyLmNvbXBvbmVudC5zY3NzIiwic3JjL2FwcC9mb3Jtcy1idWlsZGVyL2NvbXBvbmVudHMvZm9ybXMtYnVpbGRlci9mb3Jtcy1idWlsZGVyLmNvbXBvbmVudC5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUVBOzs7RUFHRSxpQkFBQTtBQ0RGOztBRElFO0VBQ0UseUJBQUE7VUFBQSxhQUFBO0FDREo7O0FESUE7RUFDRSxvQkFBQTtFQUFBLGFBQUE7RUFDQSw0QkFBQTtFQUFBLDZCQUFBO1VBQUEsc0JBQUE7RUFDQSxZQUFBO0FDREY7O0FESUE7RUFDRSxXQUFBO0FDREYiLCJmaWxlIjoic3JjL2FwcC9mb3Jtcy1idWlsZGVyL2NvbXBvbmVudHMvZm9ybXMtYnVpbGRlci9mb3Jtcy1idWlsZGVyLmNvbXBvbmVudC5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiQGltcG9ydCBcInNyYy9zdHlsZXMvY29yZXVpL3ZhcmlhYmxlcy9fY29sb3JzLnNjc3NcIjtcblxubmd4LWR5bmFtaWMtY29tcG9uZW50LFxubmd4LWRlc2lnbmVyLWNvbXBvbmVudCA6Om5nLWRlZXAgbmd4LWR5bmFtaWMtY29tcG9uZW50LFxubmd4LWRlc2lnbmVyLWNvbXBvbmVudCA6Om5nLWRlZXAgI2VtcHR5LWNvbnRhaW5lciB7XG4gIGJhY2tncm91bmQ6IHdoaXRlO1xufVxuLnRvb2xiYXIuYnRuLWdyb3VwIHtcbiAgPiAqIHtcbiAgICBmbGV4OiBpbml0aWFsO1xuICB9XG59XG46aG9zdCB7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gIGhlaWdodDogMTAwJTtcbn1cblxuLnNwaW5uZXIge1xuICB6LWluZGV4OiAxMTtcbn1cbiIsIm5neC1keW5hbWljLWNvbXBvbmVudCxcbm5neC1kZXNpZ25lci1jb21wb25lbnQgOjpuZy1kZWVwIG5neC1keW5hbWljLWNvbXBvbmVudCxcbm5neC1kZXNpZ25lci1jb21wb25lbnQgOjpuZy1kZWVwICNlbXB0eS1jb250YWluZXIge1xuICBiYWNrZ3JvdW5kOiB3aGl0ZTtcbn1cblxuLnRvb2xiYXIuYnRuLWdyb3VwID4gKiB7XG4gIGZsZXg6IGluaXRpYWw7XG59XG5cbjpob3N0IHtcbiAgZGlzcGxheTogZmxleDtcbiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgaGVpZ2h0OiAxMDAlO1xufVxuXG4uc3Bpbm5lciB7XG4gIHotaW5kZXg6IDExO1xufSJdfQ== */\"","import { Component, OnInit } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { switchMap, catchError } from 'rxjs/operators';\nimport { of, Observable } from 'rxjs';\nimport { UIModel } from '@ngx-dynamic-components/core';\nimport { AuthService, LoginService } from 'src/app/security/services';\nimport { FileManagerService, NotificationService } from 'src/app/shared/services';\nimport { Form } from 'src/app/shared';\nimport { FormInfo } from '../../models';\nimport { DataService } from '../../services/data.service';\nimport { FORM_BUILDER_PATH } from '../../constants';\nimport { Variables } from 'src/app/shared/app-variables';\nimport { NotificationType } from 'src/app/shared/models';\nimport { Interpreter } from 'src/app/shared/interpreter/interpreter';\nimport { getInterpreter } from 'src/app/shared/interpreter';\n\n@Component({\n  selector: 'app-forms-builder',\n  templateUrl: './forms-builder.component.html',\n  styleUrls: ['./forms-builder.component.scss']\n})\nexport class FormsBuilderComponent implements OnInit {\n  formInfo: FormInfo;\n  designerMode = true;\n  isAuthenticated = false;\n  loading$: Observable<boolean>;\n  isFormSelected: Boolean;\n  scripts = '';\n  interpreter: Interpreter;\n\n  private defaultFormInfo: FormInfo = {\n    formId: 0,\n    formName: 'newForm',\n    title: 'New From',\n    folder: 'forms-folder',\n    description: '',\n    ownerName: null,\n    uiModel: Form.uiModel,\n    workflowsMap: Form.workflowsMap,\n    tags: [],\n    attributes: {},\n    isPublic: false,\n    scripts: ''\n  };\n\n  constructor(\n    private fileManager: FileManagerService,\n    private dataService: DataService,\n    private router: Router,\n    private authService: AuthService,\n    private loginService: LoginService,\n    private notification: NotificationService) {}\n\n  ngOnInit() {\n    this.interpreter = getInterpreter();\n    this.formInfo = {...this.defaultFormInfo};\n    this.loading$ = this.dataService.isLoading$;\n    this.authService.isAuthenticated$.subscribe(isAuth => {\n      this.isAuthenticated = isAuth;\n      this.defaultFormInfo.ownerName = isAuth ? this.authService.user.userName : null;\n      this.formInfo.ownerName = this.defaultFormInfo.ownerName;\n      this.formInfo.workflowsMap._var_import_overrides.ownerName = this.formInfo.ownerName;\n    });\n    this.dataService.selectedForm$.pipe(\n      switchMap(form => {\n        this.isFormSelected = Boolean(form);\n        if (form) {\n          return this.dataService.getForm(form).pipe(\n            catchError((e) => {\n              this.notification.open({\n                type: NotificationType.DANGER,\n                message: e.message\n              });\n              this.router.navigate([FORM_BUILDER_PATH]);\n              return of({...this.defaultFormInfo});\n            })\n          );\n        }\n        return of({...this.defaultFormInfo});\n      })\n    ).subscribe(form => {\n      this.scripts = form.scripts || '';\n      this.renderForm(form);\n    });\n  }\n\n  onUIModelUpdate(uiModel: UIModel) {\n    this.formInfo.uiModel = uiModel;\n  }\n\n  onScriptUpdate(scripts: string) {\n    this.formInfo.scripts = scripts;\n  }\n\n  onFileExport() {\n    this.fileManager.exportToFile(this.formInfo, {\n      fileName: `rc-${this.formInfo.formName}`\n    });\n  }\n\n  onFileImport() {\n    this.fileManager.importFromFile().subscribe(({result}) => {\n      this.renderForm(result);\n    });\n  }\n\n  onDeleteForm() {\n    this.dataService.deleteForm(this.formInfo.formId).pipe(\n      switchMap(() => {\n        const {sqlConnectionUrl, ownerName, tableName} = this.getObjectProperties();\n        return this.dataService.deleteObject(sqlConnectionUrl, ownerName, tableName);\n      }),\n      catchError((e) => {\n        this.notification.open({\n          type: NotificationType.DANGER,\n          message: e.error || e.message\n        });\n        return of(e);\n      })\n    ).subscribe(res => {\n      this.onNewForm();\n    });\n\n  }\n\n  toggleMode() {\n    this.designerMode = !this.designerMode;\n  }\n\n  getObjectProperties() {\n    const importVars = this.formInfo.workflowsMap._var_import_overrides;\n    const vars = this.formInfo.workflowsMap._var;\n    const resolvedVars = Variables.resolve(vars, importVars) as any;\n    return {\n      tableName: resolvedVars.tableName,\n      ownerName: resolvedVars.ownerName,\n      sqlConnectionUrl: resolvedVars.sql_api_url\n    };\n  }\n\n  get modeTitle() {\n    return this.designerMode ? 'Preview' : 'Designer';\n  }\n\n  get isPreviewDisabled() {\n    return this.designerMode && !this.formInfo;\n  }\n\n  openConfig() {\n    if (this.isAuthenticated) {\n      this.dataService.saveFormDialog(this.formInfo).subscribe(async formInfo => {\n        this.scripts = formInfo.scripts;\n        await this.interpreter.evaluate(this.scripts, null, 'design_time');\n        this.renderForm(formInfo);\n        this.router.navigate([FORM_BUILDER_PATH, formInfo.ownerName, formInfo.formName]);\n      });\n    } else {\n      this.loginService.openDialog();\n    }\n  }\n\n  onNewForm() {\n    this.router.navigate([FORM_BUILDER_PATH]);\n  }\n\n  private renderForm(form: FormInfo) {\n    this.toggleMode();\n    this.formInfo.uiModel = null;\n    setTimeout(() => {\n      this.formInfo = form;\n      this.toggleMode();\n    });\n  }\n}\n","module.exports = \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2Zvcm1zLWJ1aWxkZXIvY29tcG9uZW50cy9pbXBvcnQtbGF5b3V0L2ltcG9ydC1sYXlvdXQuY29tcG9uZW50LnNjc3MifQ== */\"","import { Component, OnInit } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { switchMap } from 'rxjs/operators';\nimport { DataService } from '../../services/data.service';\nimport { FORM_BUILDER_PATH } from '../../constants';\nimport { WorkflowEngine, WorkflowConfig } from '@ngx-dynamic-components/core';\nimport { Variables } from 'src/app/shared/app-variables';\nimport { AuthService } from 'src/app/security';\n\n@Component({\n  selector: 'app-import-layout',\n  templateUrl: './import-layout.component.html',\n  styleUrls: ['./import-layout.component.scss']\n})\nexport class ImportLayoutComponent implements OnInit {\n\n  workflowConfig: WorkflowConfig = {\n    failOnError: true,\n    include: ['@common'],\n    vars: {},\n    workflowsMap: {},\n    consts: {},\n    variableResolver: Variables\n  };\n\n  constructor(private route: ActivatedRoute, private dataService: DataService, private router: Router, private authService: AuthService) { }\n\n  ngOnInit() {\n    this.route.params.pipe(\n      switchMap(params => this.dataService.getForm(params)),\n      switchMap(formInfo => {\n        formInfo.formId = 0;\n        formInfo.ownerName =  this.authService.user.userName;\n        formInfo.workflowsMap._var_import_overrides.objectOwner = formInfo.ownerName;\n        return this.dataService.saveFormDialog(formInfo);\n      })\n    ).subscribe(async form => {\n      this.workflowConfig.workflowsMap = form.workflowsMap;\n      this.workflowConfig.vars.uiModel = form.uiModel;\n      const workflowEngine = new WorkflowEngine(this.workflowConfig);\n      await workflowEngine.run('design_time');\n      this.router.navigate([FORM_BUILDER_PATH, form.ownerName, form.formName]);\n    }, () => {\n      // Handle error\n      // this.router.navigate([FORM_BUILDER_PATH]);\n    });\n  }\n}\n","module.exports = \"app-list-view {\\n  background-color: white;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3ZrdWt1cmJhL0RldmVsb3BtZW50L1Byb2plY3RzL3Vwd29yay93b3Jrc2hlZXRzMi1hcHAvc3JjL2FwcC9mb3Jtcy1idWlsZGVyL2NvbXBvbmVudHMvc2F2ZWQtZm9ybXMvc2F2ZWQtZm9ybXMuY29tcG9uZW50LnNjc3MiLCJzcmMvYXBwL2Zvcm1zLWJ1aWxkZXIvY29tcG9uZW50cy9zYXZlZC1mb3Jtcy9zYXZlZC1mb3Jtcy5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLHVCQUFBO0FDQ0YiLCJmaWxlIjoic3JjL2FwcC9mb3Jtcy1idWlsZGVyL2NvbXBvbmVudHMvc2F2ZWQtZm9ybXMvc2F2ZWQtZm9ybXMuY29tcG9uZW50LnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyJhcHAtbGlzdC12aWV3IHtcbiAgYmFja2dyb3VuZC1jb2xvcjogd2hpdGU7XG59XG4iLCJhcHAtbGlzdC12aWV3IHtcbiAgYmFja2dyb3VuZC1jb2xvcjogd2hpdGU7XG59Il19 */\"","import { Component, OnInit, ViewChild } from '@angular/core';\nimport { Router, ActivatedRoute } from '@angular/router';\nimport { ListViewComponent } from 'src/app/shared';\nimport { LoginService, AuthService } from 'src/app/security/services';\nimport { DataService } from '../../services/data.service';\nimport { FormShortInfo } from '../../models';\nimport { filter, switchMap, tap } from 'rxjs/operators';\n\n@Component({\n  selector: 'app-saved-forms',\n  templateUrl: './saved-forms.component.html',\n  styleUrls: ['./saved-forms.component.scss']\n})\nexport class SavedFormsComponent implements OnInit {\n\n  @ViewChild('listView', {static: false}) listView: ListViewComponent;\n  forms: FormShortInfo[];\n  isAuthenticated = false;\n  error: string;\n\n  constructor(public dataService: DataService,\n    private router: Router,\n    private route: ActivatedRoute,\n    private authService: AuthService,\n    public loginService: LoginService) { }\n\n  ngOnInit() {\n    this.authService.isAuthenticated$.pipe(\n      tap(isAuth => this.isAuthenticated = isAuth),\n      filter(isAuth => isAuth),\n      switchMap(() => this.dataService.getForms()),\n      tap(forms => this.forms = forms),\n      switchMap(() => this.dataService.selectedForm$)\n    ).subscribe(form => {\n      if (this.listView) {\n        this.listView.selectItem(form);\n      }\n    });\n  }\n\n  onSelect(item: FormShortInfo) {\n    if (item) {\n      const { ownerName, formName } = item;\n      if (ownerName && formName) {\n        this.router.navigate([ownerName, formName], {relativeTo: this.route});\n      }\n    } else {\n      this.router.navigate([], {relativeTo: this.route});\n    }\n  }\n}\n","export const FORM_BUILDER_PATH = '/forms/builder';\n","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\nimport { FormsBuilderLayoutComponent } from './components/forms-builder-layout/forms-builder-layout.component';\nimport { ImportLayoutComponent } from './components/import-layout/import-layout.component';\nimport { FormPreviewComponent } from './components/form-preview/form-preview.component';\nimport { PreviewGuard, AuthGuard } from './guards';\nimport { DialogService } from '../shared/services';\nimport { DataService } from './services/data.service';\n\n\nconst routes: Routes = [{\n  path: 'builder',\n  component: FormsBuilderLayoutComponent,\n  children: [{\n    path: ':ownerName/:formName'\n  }]\n}, {\n  path: ':ownerName/:formName',\n  component: FormPreviewComponent,\n  canActivate: [PreviewGuard]\n}, {\n  path: 'import/:ownerName/:formName',\n  component: ImportLayoutComponent,\n  canActivate: [AuthGuard]\n}];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n  providers: [DialogService, DataService]\n})\nexport class FormsBuilderRoutingModule { }\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { AlertModule } from 'ngx-bootstrap/alert';\nimport { BsDropdownModule } from 'ngx-bootstrap/dropdown';\n\nimport { CoreModule } from '@ngx-dynamic-components/core';\nimport { BootstrapModule } from '@ngx-dynamic-components/bootstrap';\nimport { MaterialModule } from '@ngx-dynamic-components/material';\nimport { WijmoModule } from 'src/app/wijmo/wijmo.module';\n\nimport { SharedModule } from 'src/app/shared';\nimport { DialogService, ActionsService } from 'src/app/shared/services';\nimport { FormsBuilderRoutingModule } from './forms-builder-routing.module';\nimport { FormsBuilderLayoutComponent } from './components/forms-builder-layout/forms-builder-layout.component';\nimport { FormsBuilderComponent } from './components/forms-builder/forms-builder.component';\nimport { SavedFormsComponent } from './components/saved-forms/saved-forms.component';\nimport { FormInfoComponent } from './components/form-info/form-info.component';\nimport { FormPreviewComponent } from './components/form-preview/form-preview.component';\nimport { ImportLayoutComponent } from './components/import-layout/import-layout.component';\nimport { DataService } from './services/data.service';\nimport './forms-interpreter';\n\n\n@NgModule({\n  declarations: [FormsBuilderLayoutComponent, FormsBuilderComponent, SavedFormsComponent, FormInfoComponent,\n    FormPreviewComponent, ImportLayoutComponent],\n  imports: [\n    CommonModule,\n    FormsBuilderRoutingModule,\n    CoreModule,\n    BootstrapModule,\n    MaterialModule,\n    WijmoModule,\n    SharedModule,\n    AlertModule.forRoot(),\n    BsDropdownModule.forRoot(),\n    FormsModule\n  ],\n  providers: [DialogService, DataService],\n  entryComponents: [FormInfoComponent]\n})\nexport class FormsBuilderModule {\n  constructor(private actions: ActionsService) {}\n}\n","import { UIModel, JSONUtils } from '@ngx-dynamic-components/core';\nimport { registerFunction } from '../shared/interpreter';\n\nregisterFunction('validateModel', validateModel);\n\nfunction validateModel(uiModel: UIModel, dataModel: any): boolean {\n  let valid = true;\n  const fields = JSONUtils.find(uiModel, '$(children)/itemProperties');\n  const requiredFields = fields.filter(f => f.required);\n  if (requiredFields.length) {\n    requiredFields.forEach(f => {\n      const value = JSONUtils.find(dataModel, f.dataModelPath);\n      valid = ![undefined, null, ''].includes(value);\n    });\n  }\n  return valid;\n}\n","import { Injectable } from '@angular/core';\nimport { ActivatedRouteSnapshot, Router, CanActivate } from '@angular/router';\nimport { Observable, of, throwError } from 'rxjs';\nimport { map, catchError, filter, switchMap } from 'rxjs/operators';\n\nimport { AuthService, LoginService } from 'src/app/security/services';\nimport { User } from 'src/app/security/models';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class AuthGuard implements CanActivate {\n\n  constructor(private authService: AuthService, private router: Router, private loginService: LoginService) {}\n\n  canActivate(next: ActivatedRouteSnapshot): Observable<boolean> {\n    return this.authService.getCurrentUser().pipe(\n      switchMap((user: User) => {\n        if (user.userName === 'Public') {\n          return throwError('Authorized as public');\n        }\n        return of(true);\n      }),\n      catchError(() => {\n        return this.login();\n      })\n    );\n  }\n\n  private login() {\n    this.loginService.openDialog();\n    return this.authService.isAuthenticated$.pipe(\n      filter(isAuth => (isAuth as boolean) && this.authService.user.userName !== 'Public'),\n      map(() => true));\n  }\n}\n","export * from './preview.guard';\nexport * from './auth.guard';\n","import { Injectable } from '@angular/core';\nimport { ActivatedRouteSnapshot, CanActivate } from '@angular/router';\nimport { Observable, of } from 'rxjs';\nimport { map, catchError, filter, switchMap } from 'rxjs/operators';\n\nimport { DataService } from '../services/data.service';\nimport { LoginService, AuthService } from 'src/app/security/services';\nimport { NotificationService } from 'src/app/shared/services';\nimport { NotificationType } from 'src/app/shared/models';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class PreviewGuard implements CanActivate {\n  constructor(\n    private dataService: DataService,\n    private loginService: LoginService,\n    private authService: AuthService,\n    private notification: NotificationService) {}\n\n  canActivate(next: ActivatedRouteSnapshot): Observable<boolean> {\n    return this.dataService.getForm(next.params).pipe(\n      catchError((e) => {\n        if (!this.authService.user) {\n          this.loginService.openDialog();\n          return this.authService.isAuthenticated$.pipe(\n            filter(isAuth => isAuth),\n            switchMap(() => this.dataService.getForm(next.params).pipe(\n                catchError((error) => this.notAvailableForm(error)))));\n        }\n        return this.notAvailableForm(e);\n      }),\n      map(() => true));\n  }\n\n  private notAvailableForm(e) {\n    this.notification.open({\n      type: NotificationType.DANGER,\n      message: `${e.message}. Used account ${this.authService.user.userName}.`\n    });\n    return of(false);\n  }\n}\n\n\n","import { Injectable } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { FormShortInfo, FormInfo, FormOwner } from '../models';\nimport { Observable, throwError, BehaviorSubject } from 'rxjs';\nimport { environment } from 'src/environments/environment';\nimport { tap, catchError, switchMap, distinctUntilChanged, map } from 'rxjs/operators';\nimport { AuthService } from 'src/app/security';\nimport { NotificationService, DialogService, SqlDbService } from 'src/app/shared/services';\nimport { NotificationType } from 'src/app/shared/models';\nimport { FormInfoComponent } from '../components/form-info/form-info.component';\nimport { DynamicDialogComponent } from 'src/app/shared/components/dynamic-dialog/dynamic-dialog.component';\n\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class DataService {\n\n  private formInfoList = new BehaviorSubject<FormShortInfo[]>(null);\n  forms$ = this.formInfoList.asObservable();\n\n  private selectedForm = new BehaviorSubject<FormShortInfo|FormOwner>(null);\n  selectedForm$ = this.selectedForm.asObservable().pipe(\n    distinctUntilChanged((x, y) => this.areFormsEqual(x, y)));\n  private selectedFormOwner: FormOwner;\n\n  private isLoading = new BehaviorSubject<boolean>(false);\n  isLoading$ = this.isLoading.asObservable();\n\n  constructor(\n    private httpClient: HttpClient,\n    private authService: AuthService,\n    private notificationService: NotificationService,\n    private sqlDb: SqlDbService,\n    private dialogService: DialogService) {}\n\n  getForms(): Observable<FormShortInfo[]> {\n    return this.loadForms().pipe(switchMap(() => this.forms$));\n  }\n\n  getForm(form: FormOwner): Observable<FormInfo> {\n    this.isLoading.next(true);\n    const url = `${environment.apiBaseUrl}/forms/form/${form.ownerName}/${form.formName}`;\n    return this.httpClient.get<FormInfo>(url, this.authService.getHttpHeaders()).pipe(\n      tap((formInfo) => {\n        if (!formInfo) {\n          throw Error(`No form or no access to form ${form.ownerName}/${form.formName}`);\n        }\n        const selected = this.selectedForm.value;\n        if (this.areFormsEqual(formInfo, selected) && !selected.hasOwnProperty('formId')) {\n          this.selectedForm.next(formInfo);\n        }\n        this.stopLoading();\n      }),\n      catchError(e => {\n        this.stopLoading();\n        return throwError(e);\n      })\n    );\n  }\n\n  saveForm(form: FormInfo) {\n    const url = `${environment.apiBaseUrl}/forms/form`;\n    this.isLoading.next(true);\n    return this.httpClient.post<number>(url, form, this.authService.getHttpHeaders()).pipe(\n      switchMap(id => this.loadForms().pipe(map(() => id))),\n      catchError(e => {\n        this.notificationService.open({\n          type: NotificationType.DANGER,\n          message: e.error\n        });\n        return throwError(e);\n      }));\n  }\n\n  deleteForm(id: number) {\n    const url = `${environment.apiBaseUrl}/forms/form/${id}`;\n    return this.httpClient.delete<any>(url, this.authService.getHttpHeaders()).pipe(\n      switchMap(() => this.loadForms()),\n      catchError(e => {\n        this.notificationService.open({\n          type: NotificationType.DANGER,\n          message: e.error\n        });\n        return throwError(e);\n      }));\n  }\n\n  deleteObject(sqlConnectionUrl: string, ownerName: string, objectName: string) {\n    return this.sqlDb.getObject(sqlConnectionUrl, ownerName, objectName).pipe(\n      switchMap(obj => {\n        if (!obj) {\n          return throwError(`Table not found for ${ownerName}, ${objectName}`);\n        }\n        return this.sqlDb.deleteObject(sqlConnectionUrl, obj);\n      }));\n  }\n\n  selectForm(form: FormOwner) {\n    if (!this.areFormsEqual(form, this.selectedForm.value)) {\n      this.selectedFormOwner = form;\n      const selected = this.formInfoList.value && this.formInfoList.value.find(f => this.areFormsEqual(form, f));\n      if (selected) {\n        this.selectedForm.next(selected);\n      } else if (form.formName && form.ownerName) {\n        this.selectedForm.next(form);\n      } else {\n        this.selectedForm.next(null);\n      }\n    }\n  }\n\n  private loadForms(): Observable<FormShortInfo[]> {\n    const url = `${environment.apiBaseUrl}/forms/my-forms`;\n    this.isLoading.next(true);\n    return this.httpClient.get<FormShortInfo[]>(url, this.authService.getHttpHeaders()).pipe(\n      tap(forms => {\n        this.formInfoList.next(forms);\n        if (this.selectedFormOwner) {\n          this.selectForm(this.selectedFormOwner);\n        }\n        this.stopLoading();\n      }),\n      catchError(e => {\n        this.isLoading.next(false);\n        this.notificationService.open({\n          type: NotificationType.DANGER,\n          message: e.message\n        });\n        return throwError(e);\n      }));\n  }\n\n  areFormsEqual(...args: FormOwner[]) {\n    if (args.length > 1) {\n      const first = args[0];\n      return !args.slice(1).some((f) => {\n        return !(first && f && first.ownerName === f.ownerName && first.formName === f.formName);\n      });\n    }\n\n    return true;\n  }\n\n  saveFormDialog(formInfo: FormInfo, formEditDialog?: DynamicDialogComponent): Observable<FormInfo> {\n    if (!formEditDialog) {\n      formEditDialog = this.dialogService.open(FormInfoComponent, {class: 'modal-lg'});\n      formEditDialog.config = formInfo;\n      formEditDialog.modal.onHide.subscribe(() => {\n        formEditDialog.component.save.next();\n        formEditDialog.component.save.complete();\n      });\n    }\n    return formEditDialog.init.pipe(\n        switchMap(() => formEditDialog.component.save),\n        switchMap((form) => {\n          if (!form) {\n            return this.saveFormDialog(formInfo, formEditDialog);\n          }\n          const shortForm = form as FormShortInfo;\n          const ownerName = this.authService.user.userName;\n          const formId = ownerName === formInfo.ownerName ? formInfo.formId : 0;\n          const newFormInfo = {...formInfo, ...shortForm, ownerName, formId };\n          return this.saveForm(newFormInfo).pipe(\n            map(id => {\n              setTimeout(() => {\n                formEditDialog.modal.hide();\n              });\n              newFormInfo.formId = id;\n              return newFormInfo;\n            }),\n            catchError(() => {\n              return this.saveFormDialog(newFormInfo, formEditDialog);\n            }));\n        }));\n  }\n\n  private stopLoading() {\n    setTimeout(() => {\n      this.isLoading.next(false);\n    }, 1e1);\n  }\n}\n"],"sourceRoot":""}